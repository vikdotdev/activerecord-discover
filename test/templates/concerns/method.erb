module <%= name %>
  extend ActiveSupport::Concern

  <% if @includes.present? %>
    include <%= Array.wrap(@includes).map(&:name).join(', ') %>
  <% end %>

  included do
    <% if @callback.present? && @method.present? %>
      <% content_for(:callback) do %>
        <%= @callback %> :<%= @method %>
      <% end %>
    <% end %>

    <% if @method.present? && !@skip_method_definition %>
      <% content_for(:method) do %>
        def <%= @method %>
        end
      <% end %>
    <% end %>
  end
end
